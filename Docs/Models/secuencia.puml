@startuml

hide footbox
skinparam ParticipantPadding 20

participant MainView
participant MainPresenter
participant Repository
participant IGasolinerasAPI

box "Internet" #lavenderblush
database Ministerio #orange
endbox

[-> MainView : onCreate()
activate MainView

MainView -> MainPresenter : init()
activate MainPresenter

MainPresenter -> MainView : init()
note left: initialize listeners
|||

MainPresenter <-- MainView : //finished//

MainPresenter -> MainPresenter : load()

MainPresenter -> Repository : requestStations()

deactivate MainView
deactivate MainPresenter
activate Repository

Repository -> IGasolinerasAPI : gasolineras()
deactivate Repository
activate IGasolinerasAPI

IGasolinerasAPI -->(20) Ministerio
deactivate IGasolinerasAPI
note right: Request data \nfrom service

...waiting for data...

Ministerio -->(20) IGasolinerasAPI
activate IGasolinerasAPI
note right: Data is provided

IGasolinerasAPI --> Repository : [gasolineras]
deactivate IGasolinerasAPI
activate Repository

Repository --> MainPresenter : [gasolineras]
deactivate Repository
activate MainPresenter

MainPresenter -> MainView : showStations()
activate MainView
note left: updates UI\n with gas stations

|||

MainView --> MainPresenter
deactivate MainView
deactivate MainPresenter

@enduml
